<!-- <mat-form-field>
  <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
</mat-form-field> 
<mat-card-content>
  <mat-progress-bar class="example-margin" *ngIf="cargando" [color]="color" [mode]="mode" [value]="value" [bufferValue]="bufferValue">
  </mat-progress-bar>
</mat-card-content>
<h1 class="m-0">Egresos</h1>
  
<div class="mat-elevation-z8">
    <table mat-table [dataSource]="ELEMENT_DATA">
    <ng-container matColumnDef="solicitante">
      <th mat-header-cell *matHeaderCellDef> Cliente  </th>
      <td mat-cell *matCellDef="let element"> {{element.nombres}} {{element.apellidos}} </td>
    </ng-container>
    <ng-container matColumnDef="fecha">
      <th mat-header-cell *matHeaderCellDef> Fecha </th>
      <td mat-cell *matCellDef="let element"> {{element.fecha | date :'mediumDate'}} </td>
    </ng-container>
    <ng-container matColumnDef="star" stickyEnd >
      <th class="nuevo-pointer" mat-header-cell *matHeaderCellDef 
      [routerLink]="['crud-egreso']"><mat-icon class="md-48">add</mat-icon></th>
      <td mat-cell *matCellDef="let element">
        <button mat-icon-button  (click)="abrirModalVerDetalle(element)">
          <mat-icon>more_vert</mat-icon>
        </button>
      </td>  
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns" ></tr>
    <tr  mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
  <mat-paginator [length]="length" [pageSizeOptions]="[10, 20, 30]"  (page)="paginar($event)"></mat-paginator>
</div>
-->


<!-- <m-portlet [options]="{headLarge: true}" [loading$]="dataSource.loading$"> -->
<mat-progress-bar class="example-margin" *ngIf="cargando" [color]="color" [mode]="mode" [value]="value" [bufferValue]="bufferValue">
</mat-progress-bar>
<m-portlet [options]="{headLarge: true}">
    <!-- start::Header (attributtes: mPortletHeadTitle|mPortletHeadTools) -->
    <ng-container mPortletHeadTitle>
        <div class="m-portlet__head-title">
            <h3 class="m-portlet__head-text">
                Facturación
            </h3>
        </div>
    </ng-container>
    <ng-container mPortletHeadTools>
        <a [routerLink]="['crud-egreso']" mat-raised-button color="primary" matTooltip="Crear nueva factura">Nueva factura</a>
    </ng-container>
    <!-- end::Header -->

    <!-- start::Body (attribute: mPortletBody) -->
    <ng-container mPortletBody>
        <!-- start::FILTERS & GROUP ACTIONS -->
        <div class="m-form">
            <!-- start::FILTERS 
            <div class="m-form__filtration">
                <div class="row align-items-center">
                    <div class="col-md-2 m--margin-bottom-10-mobile">

                        <div class="m-form__control">
                            <mat-form-field>
                                <mat-select [(value)]="filterStatus" (selectionChange)="loadProductsList()" class="mat-form-field mat-form-field-fluid">
                                    <mat-option value="">Todas</mat-option>
                                    <mat-option value="0">Publicadas</mat-option>
                                    <mat-option value="1">En espera</mat-option>
                                </mat-select>
                                <mat-hint align="start">
                                    <strong>Filtrar por estado</strong>
                                </mat-hint>
                            </mat-form-field>
                        </div>

                    </div>
                    <div class="col-md-2 m--margin-bottom-10-mobile">

                        <div class="m-form__control">
                            <mat-form-field>
                                <mat-select [(value)]="filterCondition" (selectionChange)="loadProductsList()" class="mat-form-field mat-form-field-fluid">
                                    <mat-option value="">All</mat-option>
                                    <mat-option value="0">New</mat-option>
                                    <mat-option value="1">Used</mat-option>
                                </mat-select>
                                <mat-hint align="start">
                                    <strong>Filter by Contidion</strong>
                                </mat-hint>
                            </mat-form-field>
                        </div>

                        <div class="d-md-none m--margin-bottom-10"></div>
                    </div>
                    <div class="col-md-4 m--margin-bottom-10-mobile">
                        <mat-form-field>
                            <input matInput placeholder="Search product" #searchInput placeholder="Search" class="mat-form-field mat-form-field-fluid">
                            <mat-hint align="start">
                                <strong>Buscar en todos los campos</strong>
                            </mat-hint>
                        </mat-form-field>
                    </div>
                </div>
            </div>
            -->
        </div>

        <div class="mat-table__wrapper">
            <mat-table class="lmat-elevation-z8" [dataSource]="ELEMENT_DATA" matSort matSortActive="id" matSortDirection="asc" matSortDisableClear>
                <ng-container matColumnDef="idegreso">
                    <mat-header-cell *matHeaderCellDef mat-sort-header class="mat-column-vinCode">Número</mat-header-cell>
                    <mat-cell *matCellDef="let egreso" class="mat-column-vinCode">{{egreso.idegreso}}</mat-cell>
                </ng-container>

                <ng-container matColumnDef="cliente">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>Cliente</mat-header-cell>
                    <mat-cell *matCellDef="let egreso">{{egreso.nombres}} {{egreso.apellidos}}</mat-cell>
                </ng-container>

                <ng-container matColumnDef="usuario">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>Facturado por</mat-header-cell>
                    <mat-cell *matCellDef="let egreso">{{egreso.nombresusuario}} {{egreso.apellidosusuario}}</mat-cell>
                </ng-container>
                <ng-container matColumnDef="fecha">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>Fecha</mat-header-cell>
                    <mat-cell *matCellDef="let egreso">{{egreso.fecha | date :'mediumDate'}}</mat-cell>
                </ng-container>

                <ng-container matColumnDef="actions">
                    <mat-header-cell *matHeaderCellDef>
                        Acciones
                    </mat-header-cell>
                    <mat-cell *matCellDef="let egreso">
                        
                      <button mat-icon-button matTooltip="Ver factura" (click)="abrirModalVerDetalle(egreso)">
                        <i class="la la-cart-arrow-down"></i>
                      </button>
                      <button mat-icon-button matTooltip="Ver hoja de envío" (click)="abrirModalInstrucciones(egreso)">
                        <i class="la la-code-fork"></i>
                      </button>
                        
                    </mat-cell>
                </ng-container>

                <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
            </mat-table>

            <div class="mat-table__message" *ngIf="length==0">No se encontraron registros</div>
        </div>

        <!-- start: BOTTOM -->
        <div class="mat-table__bottom">
            <!-- <mat-spinner [diameter]="20" *ngIf="dataSource.loading$ | async"></mat-spinner> -->
            <!-- <mat-paginator [pageSize]="10" [pageSizeOptions]="[10, 50, 100]" [length]="dataSource.paginatorTotal$ | async" [showFirstLastButtons]="true"></mat-paginator> -->
            <mat-paginator [length]="length" [pageSizeOptions]="[10, 20, 30]" (page)="paginar($event)" [showFirstLastButtons]="true"></mat-paginator>
        </div>
        <!-- end: BOTTOM -->
    </ng-container>
    <!-- end::Body -->
</m-portlet>